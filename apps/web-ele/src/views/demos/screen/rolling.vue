<script setup lang="ts">
import type { RollingItem } from '@vben-core/screen-ui';

import { ref } from 'vue';

import { VbenScreenCard, VbenScreenRollingDisplay } from '@vben-core/screen-ui';

import { ElMessage } from 'element-plus';

import 'element-plus/es/components/message/style/css';

// å‚ç›´æ»šåŠ¨æ•°æ®
const verticalData = ref([
  'ğŸš€ ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–å®Œæˆï¼Œå“åº”é€Ÿåº¦æå‡30%',
  'ğŸ¯ æ–°åŠŸèƒ½é¢„å‘Šï¼šAIæ™ºèƒ½åŠ©æ‰‹å³å°†ä¸Šçº¿',
  'ğŸ”§ ç³»ç»Ÿç»´æŠ¤é€šçŸ¥ï¼šæœ¬å‘¨æ—¥å‡Œæ™¨2ç‚¹è¿›è¡Œä¾‹è¡Œç»´æŠ¤',
  'ğŸ‰ æ­å–œï¼å¹³å°ç”¨æˆ·æ•°çªç ´100ä¸‡',
  'ğŸ“Š æœ¬æœˆä¸šåŠ¡å¢é•¿æŠ¥å‘Šå·²ç”Ÿæˆ',
]);

// æ°´å¹³æ»šåŠ¨æ•°æ®
const horizontalData = ref([
  'ğŸ“¢ é‡è¦é€šçŸ¥ï¼šç³»ç»Ÿå°†äºä»Šæ™šè¿›è¡Œç»´æŠ¤å‡çº§ï¼Œé¢„è®¡è€—æ—¶2å°æ—¶',
  'ğŸŒŸ æ–°åŠŸèƒ½ä¸Šçº¿ï¼šæ·±è‰²æ¨¡å¼ç°å·²æ”¯æŒå…¨ç«™åˆ‡æ¢',
  'ğŸ”” æ¸©é¦¨æç¤ºï¼šè¯·åŠæ—¶æ›´æ–°æ‚¨çš„å¯†ç ä»¥ç¡®ä¿è´¦æˆ·å®‰å…¨',
  'ğŸ“‹ ç³»ç»Ÿå…¬å‘Šï¼šæ–°ç‰ˆæœ¬åŠŸèƒ½ä»‹ç»è§†é¢‘å·²å‘å¸ƒ',
]);

// å›¾æ–‡æ··åˆæ•°æ®
const mixedData = ref<RollingItem[]>([
  {
    text: 'ç³»ç»Ÿå‘Šè­¦ï¼šCPUä½¿ç”¨ç‡è¶…è¿‡90%',
    image:
      'https://api.iconify.design/material-symbols:warning-rounded.svg?color=%23ff4d4f',
  },
  {
    text: 'å¤‡ä»½å®Œæˆï¼šæ•°æ®åº“è‡ªåŠ¨å¤‡ä»½æˆåŠŸ',
    image:
      'https://api.iconify.design/material-symbols:check-circle-rounded.svg?color=%2352c41a',
  },
  {
    text: 'å®‰å…¨æé†’ï¼šå‘ç°å¼‚å¸¸ç™»å½•å°è¯•',
    image:
      'https://api.iconify.design/material-symbols:security-rounded.svg?color=%23faad14',
  },
  {
    text: 'æ›´æ–°é€šçŸ¥ï¼šæ–°ç‰ˆæœ¬V2.1.0å·²å‘å¸ƒ',
    image:
      'https://api.iconify.design/material-symbols:system-update-rounded.svg?color=%231890ff',
  },
]);

// HTML å†…å®¹æ•°æ®
const htmlData = ref<RollingItem[]>([
  {
    html: `
      <div class="custom-item warning">
        <span class="icon">âš ï¸</span>
        <div class="content">
          <div class="title">ç³»ç»Ÿå‘Šè­¦</div>
          <div class="desc">æ£€æµ‹åˆ°æœåŠ¡å™¨è´Ÿè½½å¼‚å¸¸</div>
        </div>
        <span class="time">åˆšåˆš</span>
      </div>
    `,
  },
  {
    html: `
      <div class="custom-item success">
        <span class="icon">âœ…</span>
        <div class="content">
          <div class="title">éƒ¨ç½²æˆåŠŸ</div>
          <div class="desc">åº”ç”¨æ›´æ–°å·²å®Œæˆå‘å¸ƒ</div>
        </div>
        <span class="time">10åˆ†é’Ÿå‰</span>
      </div>
    `,
  },
  {
    html: `
      <div class="custom-item info">
        <span class="icon">ğŸ“¢</span>
        <div class="content">
          <div class="title">ç³»ç»Ÿå…¬å‘Š</div>
          <div class="desc">æ–°ç‰ˆæœ¬åŠŸèƒ½æŠ¢å…ˆä½“éªŒ</div>
        </div>
        <span class="time">30åˆ†é’Ÿå‰</span>
      </div>
    `,
  },
]);

// ç‚¹å‡»äº‹ä»¶å¤„ç†
const handleItemClick = ({
  item,
  index,
}: {
  index: number;
  item: RollingItem | string;
}) => {
  const text = typeof item === 'string' ? item : item.text || item.html || '';
  ElMessage.success(`ç‚¹å‡»äº†ç¬¬ ${index + 1} é¡¹: ${text}`);
};
</script>

<template>
  <div class="screen-rolling-demo">
    <VbenScreenCard title="å‚ç›´æ»šåŠ¨ç¤ºä¾‹" class="demo-card">
      <div class="card-header">
        <div class="title">ç³»ç»Ÿé€šçŸ¥</div>
        <div class="subtitle">å®æ—¶ç³»ç»Ÿæ¶ˆæ¯æ¨é€</div>
      </div>
      <VbenScreenRollingDisplay
        :data="verticalData"
        direction="vertical"
        :speed="50"
        :hover-pause="true"
        width="100%"
        height="200px"
        theme="#00ff88"
        @item-click="handleItemClick"
        class="vertical-scroll"
      />
    </VbenScreenCard>

    <VbenScreenCard title="æ°´å¹³æ»šåŠ¨ç¤ºä¾‹" class="demo-card">
      <div class="card-header">
        <div class="title">æ¶ˆæ¯è½®æ’­</div>
        <div class="subtitle">é‡è¦å…¬å‘Šå®æ—¶æ’­æŠ¥</div>
      </div>
      <VbenScreenRollingDisplay
        :data="horizontalData"
        direction="horizontal"
        :speed="40"
        :hover-pause="true"
        width="100%"
        height="80px"
        theme="#0066ff"
        @item-click="handleItemClick"
        class="horizontal-scroll"
      />
    </VbenScreenCard>

    <VbenScreenCard title="å›¾æ–‡æ··åˆç¤ºä¾‹" class="demo-card">
      <div class="card-header">
        <div class="title">çŠ¶æ€ç›‘æ§</div>
        <div class="subtitle">ç³»ç»Ÿè¿è¡ŒçŠ¶æ€å®æ—¶ç›‘æ§</div>
      </div>
      <VbenScreenRollingDisplay
        :data="mixedData"
        direction="vertical"
        :speed="45"
        :hover-pause="true"
        width="100%"
        height="300px"
        theme="#cc00ff"
        @item-click="handleItemClick"
        class="mixed-scroll"
      />
    </VbenScreenCard>

    <VbenScreenCard title="HTML å†…å®¹ç¤ºä¾‹" class="demo-card">
      <div class="card-header">
        <div class="title">é«˜çº§é€šçŸ¥</div>
        <div class="subtitle">è‡ªå®šä¹‰æ ·å¼æ¶ˆæ¯å±•ç¤º</div>
      </div>
      <VbenScreenRollingDisplay
        :data="htmlData"
        direction="vertical"
        :speed="40"
        :hover-pause="true"
        width="100%"
        height="200px"
        theme="#ff9900"
        @item-click="handleItemClick"
        class="html-scroll"
      />
    </VbenScreenCard>
  </div>
</template>

<style lang="scss" scoped>
.screen-rolling-demo {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 24px;
  min-height: 100vh;
  padding: 24px;
  background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);

  .demo-card {
    background: rgb(255 255 255 / 5%);
    backdrop-filter: blur(10px);
    border: 1px solid rgb(255 255 255 / 10%);
    box-shadow: 0 8px 32px rgb(0 0 0 / 10%);

    .card-header {
      padding: 16px;
      border-bottom: 1px solid rgb(255 255 255 / 10%);

      .title {
        margin-bottom: 4px;
        font-size: 18px;
        font-weight: 600;
        color: rgb(255 255 255 / 90%);
      }

      .subtitle {
        font-size: 14px;
        color: rgb(255 255 255 / 50%);
      }
    }

    :deep(.vben-screen-card__content) {
      padding: 0;
    }
  }

  .vertical-scroll {
    :deep(.rolling-item) {
      margin: 8px;
      background: rgb(0 255 136 / 5%);
      border-left: 4px solid #0f8;
      border-radius: 4px;
      transition: all 0.3s ease;

      &:hover {
        background: rgb(0 255 136 / 10%);
        transform: translateX(4px);
      }
    }
  }

  .horizontal-scroll {
    :deep(.rolling-item) {
      margin: 8px;
      background: rgb(0 102 255 / 5%);
      border-bottom: 4px solid #06f;
      border-radius: 4px;
      transition: all 0.3s ease;

      &:hover {
        background: rgb(0 102 255 / 10%);
        transform: translateY(-4px);
      }
    }
  }

  .mixed-scroll {
    :deep(.rolling-item) {
      margin: 8px;
      background: rgb(204 0 255 / 5%);
      border-radius: 8px;
      transition: all 0.3s ease;

      .item-content {
        padding: 12px;

        .item-image {
          width: 24px;
          height: 24px;
          padding: 8px;
          background: rgb(204 0 255 / 10%);
          border-radius: 50%;
          transition: all 0.3s ease;
        }

        .item-text {
          font-weight: 500;
        }
      }

      &:hover {
        background: rgb(204 0 255 / 10%);
        transform: scale(1.02);

        .item-image {
          background: rgb(204 0 255 / 20%);
          transform: rotate(360deg);
        }
      }
    }
  }

  .html-scroll {
    :deep(.rolling-item) {
      margin: 8px;

      .custom-item {
        display: flex;
        align-items: center;
        padding: 12px;
        background: rgb(255 153 0 / 5%);
        border-radius: 8px;
        transition: all 0.3s ease;

        .icon {
          margin-right: 12px;
          font-size: 24px;
        }

        .content {
          flex: 1;

          .title {
            margin-bottom: 4px;
            font-size: 16px;
            font-weight: 600;
            color: rgb(255 255 255 / 90%);
          }

          .desc {
            font-size: 14px;
            color: rgb(255 255 255 / 60%);
          }
        }

        .time {
          font-size: 12px;
          color: rgb(255 255 255 / 40%);
        }

        &:hover {
          background: rgb(255 153 0 / 10%);
          transform: translateX(4px);
        }

        &.warning {
          border-left: 4px solid #ff4d4f;
        }

        &.success {
          border-left: 4px solid #52c41a;
        }

        &.info {
          border-left: 4px solid #1890ff;
        }
      }
    }
  }
}
</style>
